paths:
  data_raw: data/raw/WA_Fn-UseC_-Telco-Customer-Churn.csv
  data_processed: data/processed
  models: models

model:
  name: logistic_regression
  version: 1
  selection_metric: roc_auc
  notes: "Default uses l2 + class_weight=balanced for stability; update if you want tuned params from notebook 09."
  candidates:
    - name: logistic_regression
      type: logistic_regression
      enabled: true
      params:
        C: 1.0
        penalty: l2
        solver: liblinear
        max_iter: 1000
        class_weight: balanced
        random_state: 42
    - name: xgboost
      type: xgboost
      enabled: false
      params:
        n_estimators: 400
        max_depth: 4
        learning_rate: 0.05
        subsample: 0.9
        colsample_bytree: 0.9
        eval_metric: auc
        random_state: 42
    - name: lightgbm
      type: lightgbm
      enabled: false
      params:
        n_estimators: 400
        num_leaves: 31
        learning_rate: 0.05
        subsample: 0.9
        colsample_bytree: 0.9
        random_state: 42

evaluation:
  min_recall: 0.70
  min_precision: 0.50  # Validation-time threshold selection constraint
  threshold_min: 0.20
  threshold_max: 0.85
  threshold_step: 0.05
  optimize_for: net_value  # net_value | precision | f1

artifacts:
  model_file: best_model.joblib
  preprocessor_file: preprocessor.joblib
  threshold_analysis_file: threshold_analysis_val.csv
  final_results_file: final_test_results.csv
  train_medians_file: train_medians.json
  train_summary_file: train_summary.json
  data_quality_report_file: data_quality_report.json
  drift_reference_file: drift_reference.json

split:
  test_size: 0.20
  val_size: 0.20
  random_state: 42

features:
  numeric:
    - tenure
    - MonthlyCharges
    - TotalCharges
    - avg_monthly_spend
    - charge_tenure_ratio
    - charge_deviation
    - expected_lifetime_value
    - overpay_indicator
    - tenure_group
    - num_support_services
    - num_streaming_services
    - tenure_x_contract
    - is_mtm_fiber
    - is_mtm_no_support
    - is_echeck_mtm
    - is_auto_pay
    - has_internet
    - SeniorCitizen
  categorical:
    - Contract
    - InternetService
    - OnlineSecurity
    - TechSupport
    - PaymentMethod
    - Dependents
    - PaperlessBilling

engineering:
  enabled: true
  tenure_bins: [0, 6, 12, 24, 48, 72]
  tenure_labels: [0, 1, 2, 3, 4]
  support_cols:
    - OnlineSecurity
    - TechSupport
    - OnlineBackup
    - DeviceProtection
  streaming_cols:
    - StreamingTV
    - StreamingMovies
  overpay_group_col: InternetService

business:
  clv: 2000
  success_rate: 0.30
  retained_value:
  contact_cost: 50

tracking:
  enabled: true
  file: models/experiments.jsonl

registry:
  enabled: true
  file: models/registry.json
  use_current: true
  template: "{name}_v{version}.joblib"
  auto_promote_first_model: true

mlflow:
  enabled: true
  tracking_uri: mlruns
  experiment_name: churn-prediction
  register_model: false
  model_name: churn-classifier

quality:
  min_roc_auc: 0.83
  min_recall: 0.70
  min_precision: 0.45

validation:
  required_columns:
    - tenure
    - MonthlyCharges
    - TotalCharges
    - Contract
    - InternetService
    - PaymentMethod
    - Churn
  target_column: Churn
  max_missing_ratio: 0.05
  max_duplicate_ratio: 0.02
  min_target_rate: 0.05
  max_target_rate: 0.95
  max_invalid_rows_ratio: 0.05
  allow_empty_dataframe: false
  numeric_ranges:
    tenure:
      min: 0
    MonthlyCharges:
      min: 0
    TotalCharges:
      min: 0
    SeniorCitizen:
      min: 0
      max: 1

logging:
  level: INFO
  file: logs/pipeline.log
  logger_name: churn_ml_decision

monitoring:
  enabled: true
  drift_p_value_threshold: 0.05
  reference_file: models/drift_reference.json
  drift_report_file: metrics/data_drift_report.json
  metrics_file: metrics/production_metrics.json
